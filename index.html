<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Noor - Islamic App</title>
<style>
:root{
  --bg1:#0f5c3b;
  --bg2:#1d8f5a;
  --card:rgba(0,0,0,0.3);
  --text:#ffffff;
  --sub:#d9f5e6;
  --accent:#7CFC00;
}
*{margin:0;padding:0;box-sizing:border-box;font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;}
body{background:linear-gradient(160deg,var(--bg1),var(--bg2));color:var(--text);min-height:100vh;overflow-x:hidden;transition:0.3s;}
.page{display:none;padding:20px 15px 120px;}
.active{display:block;}
h1,h2,h3{font-weight:600;}
.small{color:var(--sub);font-size:14px;}
.card{background:var(--card);backdrop-filter:blur(12px);border-radius:25px;padding:20px;margin-bottom:18px;box-shadow:0 10px 25px rgba(0,0,0,0.25);transition:0.3s;}
.big-time{font-size:44px;font-weight:700;margin:10px 0;}
.countdown{font-size:14px;color:var(--sub);}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:15px;}
.grid .card{text-align:center;padding:25px 10px;font-size:14px;cursor:pointer;transition:0.3s;}
.grid .card:hover{transform:scale(1.05);box-shadow:0 12px 30px rgba(0,255,0,0.3);}
.bottom-nav{position:fixed;bottom:0;left:0;width:100%;background:rgba(0,0,0,0.35);backdrop-filter:blur(15px);display:flex;justify-content:space-around;padding:12px 0;border-top-left-radius:25px;border-top-right-radius:25px;z-index:100;}
.nav-item{text-align:center;font-size:12px;color:var(--sub);cursor:pointer;transition:0.3s;display:flex;flex-direction:column;align-items:center;}
.nav-item svg{width:22px;height:22px;margin-bottom:2px;}
.nav-item.active{color:var(--accent);text-shadow:0 0 10px var(--accent);}
.list-row{display:flex;justify-content:space-between;padding:12px 0;border-bottom:1px solid rgba(255,255,255,0.1);}
.highlight{color:var(--accent);font-weight:600;}
button{background:linear-gradient(45deg,#7CFC00,#32CD32);border:none;padding:10px 15px;border-radius:20px;color:#000;font-weight:600;cursor:pointer;transition:0.3s;}
button:hover{transform:scale(1.05);}
input{padding:10px;margin:5px 0;border-radius:15px;border:none;width:100%;}
.surah{margin-bottom:10px;cursor:pointer;}
.hidden{display:none;}
</style>
</head>
<body>

<!-- HOME PAGE -->
<div id="home" class="page active">
  <div class="card">
    <h2>Noor</h2>
    <div id="hijri"></div>
    <div id="gregorian" class="small"></div>
    <div id="city" class="small"></div>
  </div>

  <div class="card">
    <div class="small">Next Prayer</div>
    <div id="nextPrayerName"></div>
    <div id="nextPrayerTime" class="big-time"></div>
    <div id="countdown" class="countdown"></div>
    <div class="small">Sahri: <span id="sahri"></span></div>
    <div class="small">Iftar: <span id="iftar"></span></div>
  </div>

  <div class="grid">
    <div class="card" onclick="switchPage('salah',document.querySelector('.nav-item:nth-child(2)'))">Prayer Times</div>
    <div class="card" onclick="switchPage('quran',document.querySelector('.nav-item:nth-child(3)'))">Quran</div>
    <div class="card">Hadith</div>
    <div class="card">Dua</div>
    <div class="card">Qibla</div>
    <div class="card">Tasbih</div>
    <div class="card">Asmaul Husna</div>
    <div class="card" onclick="switchPage('profile',document.querySelector('.nav-item:nth-child(4)'))">Profile</div>
  </div>
</div>

<!-- SALAH PAGE -->
<div id="salah" class="page">
  <div class="card">
    <h3>Ramadan Times</h3>
    <div>Sahri: <span id="sahri2"></span></div>
    <div>Iftar: <span id="iftar2"></span></div>
  </div>
  <div class="card" id="prayerList"></div>
</div>

<!-- QURAN PAGE -->
<div id="quran" class="page"><div id="surahList"></div></div>

<!-- PROFILE PAGE -->
<div id="profile" class="page">
  <div class="card">
    <h3>Profile</h3>
    <div>Username: <span id="profileName">Guest</span></div>
    <input type="file" id="profilePic" onchange="changeProfile(this)">
    <img id="profilePreview" src="" style="width:80px;height:80px;border-radius:50%;margin-top:10px;">
    <button onclick="logout()">Logout</button>
  </div>
</div>

<!-- LOGIN PAGE -->
<div id="login" class="page">
  <div class="card">
    <h3>Login</h3>
    <input type="text" id="loginUser" placeholder="Username">
    <input type="password" id="loginPass" placeholder="Password">
    <button onclick="login()">Login</button>
    <p id="loginMsg" class="small"></p>
    <p class="small">Don't have account? <span style="color:#7CFC00;cursor:pointer;" onclick="switchPage('signup',document.querySelector('.nav-item.active'))">Signup</span></p>
  </div>
</div>

<!-- SIGNUP PAGE -->
<div id="signup" class="page">
  <div class="card">
    <h3>Signup</h3>
    <input type="text" id="signUser" placeholder="Username">
    <input type="password" id="signPass" placeholder="Password">
    <button onclick="signup()">Signup</button>
    <p id="signupMsg" class="small"></p>
    <p class="small">Already have account? <span style="color:#7CFC00;cursor:pointer;" onclick="switchPage('login',document.querySelector('.nav-item.active'))">Login</span></p>
  </div>
</div>

<!-- SETTINGS PAGE -->
<div id="settings" class="page">
  <div class="card">
    <button onclick="toggleDark()">Toggle Dark Mode</button>
  </div>
</div>

<!-- BOTTOM NAV -->
<div class="bottom-nav">
  <div class="nav-item active" onclick="switchPage('home',this)">Home</div>
  <div class="nav-item" onclick="switchPage('salah',this)">Salah</div>
  <div class="nav-item" onclick="switchPage('quran',this)">Quran</div>
  <div class="nav-item" onclick="switchPage('profile',this)">Profile</div>
</div>

<script>
// ------------------ Page Switch ------------------
function switchPage(id,el){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  document.querySelectorAll('.nav-item').forEach(n=>n.classList.remove('active'));
  if(el) el.classList.add('active');
}

// ------------------ Date ------------------
function updateDates(){
  let now=new Date();
  document.getElementById("gregorian").innerText=now.toDateString();
  document.getElementById("hijri").innerText="Hijri Date (approx): "+now.getDate()+" Ramadan 1446";
}
updateDates();

// ------------------ Prayer Times 24h + Sahri/Iftar ------------------
let times={};
function calculateTimes(lat=23.8103,long=90.4125){
  // Simple calculation based on latitude (approx)
  let now=new Date();
  let timezone = now.getTimezoneOffset()/60*-1;
  times = {
    Fajr: 5,
    Sunrise:6,
    Dhuhr: 12,
    Asr: 15,
    Maghrib:18,
    Isha:19,
    Sahri:4+30/60,
    Iftar:18
  };
  // Update HTML
  let list="", nextName="", nextTime=24, currentHour=now.getHours()+now.getMinutes()/60;
  for(let p in times){
    let t = times[p];
    if(t>currentHour && t<nextTime){nextTime=t; nextName=p;}
    if(["Fajr","Sunrise","Dhuhr","Asr","Maghrib","Isha"].includes(p)){
      let h=Math.floor(t); let m=Math.round((t-h)*60);
      list+=`<div class="list-row ${p===nextName?'highlight':''}"><div>${p}</div><div>${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}</div></div>`;
    }
  }
  document.getElementById("prayerList").innerHTML=list;
  let h=Math.floor(nextTime); let m=Math.round((nextTime-h)*60);
  document.getElementById("nextPrayerName").innerText=nextName;
  document.getElementById("nextPrayerTime").innerText=`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}`;
  // Sahri/Iftar
  function formatTime(t){let h=Math.floor(t); let m=Math.round((t-h)*60); return `${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}`;}
  document.getElementById("sahri").innerText=formatTime(times.Sahri);
  document.getElementById("iftar").innerText=formatTime(times.Iftar);
  document.getElementById("sahri2").innerText=formatTime(times.Sahri);
  document.getElementById("iftar2").innerText=formatTime(times.Iftar);
}
calculateTimes();

// ------------------ Countdown ------------------
function updateCountdown(){
  let now=new Date();
  let [h,m]=document.getElementById("nextPrayerTime").innerText.split(":").map(Number);
  let target = new Date(); target.setHours(h); target.setMinutes(m); target.setSeconds(0);
  let diff=Math.max(0,target-now)/1000;
  let hr=Math.floor(diff/3600); let min=Math.floor((diff%3600)/60); let sec=Math.floor(diff%60);
  document.getElementById("countdown").innerText=`In ${hr}h ${min}m ${sec}s`;
}
setInterval(updateCountdown,1000);
updateCountdown();

// ------------------ Quran Sample ------------------
let surahs=[];for(let i=1;i<=114;i++){surahs.push({name:"Surah "+i,arabic:"بِسْمِ ٱللّٰهِ",translation:"In the name of Allah"});}
let html="";surahs.forEach(s=>{html+=`<div class="card surah" onclick="this.querySelector('.hidden').classList.toggle('hidden')"><div>${s.name}</div><div class="hidden small">${s.arabic}<br>${s.translation}</div></div>`});
document.getElementById("surahList").innerHTML=html;

// ------------------ Dark Mode ------------------
function toggleDark(){document.body.style.background="linear-gradient(160deg,#000,#222)";}

// ------------------ Geolocation ------------------
if(navigator.geolocation){
  navigator.geolocation.getCurrentPosition(pos=>{
    document.getElementById("city").innerText="Location detected";
    calculateTimes(pos.coords.latitude,pos.coords.longitude);
  });
}

// ------------------ Profile System ------------------
function signup(){let user=document.getElementById('signUser').value;let pass=document.getElementById('signPass').value;if(user && pass){localStorage.setItem('noor_user',user);localStorage.setItem('noor_pass',btoa(pass));document.getElementById('signupMsg').innerText="Signup success!";document.getElementById('profileName').innerText=user;switchPage('home',document.querySelector('.nav-item.active'));}}
function login(){let user=document.getElementById('loginUser').value;let pass=document.getElementById('loginPass').value;if(user==localStorage.getItem('noor_user') && btoa(pass)==localStorage.getItem('noor_pass')){document.getElementById('profileName').innerText=user;switchPage('home',document.querySelector('.nav-item.active'));} else {document.getElementById('loginMsg').innerText="Wrong credentials!";}}
function changeProfile(input){let reader=new FileReader();reader.onload=function(e){document.getElementById('profilePreview').src=e.target.result;localStorage.setItem('noor_profile', e.target.result);}reader.readAsDataURL(input.files[0]);}
function logout(){localStorage.removeItem('noor_user');localStorage.removeItem('noor_pass');switchPage('login',document.querySelector('.nav-item.active'));}

// ------------------ Load profile ------------------
window.onload=function(){let pic=localStorage.getItem('noor_profile'); if(pic) document.getElementById('profilePreview').src=pic; let user=localStorage.getItem('noor_user'); if(user) document.getElementById('profileName').innerText=user; if(!user) switchPage('login',document.querySelector('.nav-item.active'));}

</script>
</body>
</html>
